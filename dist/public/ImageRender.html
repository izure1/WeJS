<!DOCTYPE HTML>
<html>

<head>
</head>

<body>
  <div id="app"></div>
  <div>
    <button onclick="change()">Change</button>
  </div>
  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
  <script src="../lib/WeJS.js"></script>
  <script>
    const app = new WeJS.App // 새로운 viewport 만들기
    const scene = new WeJS.Scene // 새로운 씬

    const factory = new WeJS.ComponentFactory // 컴포넌트를 만들어주는 인스턴스 객체
    const loader = new WeJS.AssetLoader // 에셋을 관리해주는 인스턴스 객체

    const image = new WeJS.View

    // 이미지를 보여주기 위해 렌더러 컴포넌트를 생성합니다.
    const rendererComponent = factory.create(WeJS.RESERVATION.RENDERER_IMAGE)
    image.component.add(rendererComponent);

    // 에셋을 비동기로 로드합니다.
    (async () => {

      // 로드할 에셋을 추가합니다. 추가와 동시에 비동기로 에셋을 로드하기 시작할 것입니다.
      loader.addFromArray([
        ['assets/image/transition_before.png', 'image/png'],
        ['assets/image/transition_after.png', 'image/png']
      ])

      // 에셋 로딩이 모두 완료될 때 까지 대기합니다.
      await loader.load()

      console.log(`${loader.assets.map(t => t.uri).join(', ')} assets loaded!`)

      // 객체에 이미지 경로를 추가합니다.
      image.component.rendererImage.src = loader.list.get('assets/image/transition_before.png').uri

      // 객체의 이미지 넓이를 지정합니다.
      image.component.rendererImage.width = 300

      // 씬에 객체를 추가합니다.
      scene.component.children.lists.add(image)

    })()


    // 앱이 부착될 element를 지정
    app.element = '#app'
    app.setSize(800, 500)

    // 앱에서 씬을 실행
    app.launch(scene)
  </script>
  <script>
    function change() {
      // 이미지의 변경 속도를 지정합니다. 지정된 속도만큼 천천히 트렌지션되며 변경됩니다.
      image.component.rendererImage.duration = 1000
      image.component.rendererImage.src = loader.list.get('assets/image/transition_after.png').uri
    }
  </script>
</body>

</html>